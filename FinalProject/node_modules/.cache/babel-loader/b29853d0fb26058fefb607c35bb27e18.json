{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Cyber\\\\WebstormProjects\\\\6112 Project\\\\6112 Project\\\\FinalProject\\\\src\\\\usaVIS.js\";\nimport * as d3 from \"d3\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nconst usaVIS = ({\n  usadata\n}) => {\n  document.getElementById(\"slider\").value = 0;\n  let width = 1400;\n  let height = 600;\n  const niceFormat = d3.utcFormat(\"%B %d, %Y\");\n  const dataFormat = d3.utcFormat(\"%m/%d/%Y\");\n  const dataParse = d3.utcParse(\"%m/%d/%Y\");\n  const startDate = dataParse(\"01/21/2020\");\n  const millisecondsPerDay = 24 * 60 * 60 * 1000;\n  const valRange = [0, 5500000, 8500000];\n  const rateType = \"Confirmed\";\n  const slider = d3.select(\"#slider\").on(\"input\", function () {\n    var date = new Date(+startDate + millisecondsPerDay * this.value);\n    update(date);\n  });\n  const colormap = d3.scaleLinear().domain(valRange).range([\"blue\", \"#eeeeee\", \"red\"]);\n  const svg = d3.select(\"#mapsvg_pr\");\n  const tool_tip = d3.tip().attr(\"class\", \"d3-tip\").offset([-8, 0]);\n  let allStats;\n  Promise.all([d3.json(\"custom.geo.json\"), usadata]).then(ready);\n\n  function ready(data) {\n    const us = data[0];\n    allStats = data[1].map(function (row, i) {\n      return {\n        Updated: dataParse(row.Updated),\n        Updated: dataParse(row.Updated),\n        Country_Region: row.Country_Region,\n        Confirmed: row.Confirmed,\n        ConfirmedChange: row.ConfirmedChange,\n        Deaths: row.Deaths,\n        DeathsChange: row.DeathsChange\n      };\n    });\n    const availableDays = (d3.max(allStats, function (d) {\n      return d.Updated;\n    }) - startDate) / millisecondsPerDay;\n    slider.attr(\"max\", Math.round(availableDays));\n    render(us);\n    update(startDate);\n  }\n\n  function getStateMetrics(stats, state_name) {\n    for (var i = 0; i < stats.length; i++) {\n      if (stats[i].Country_Region == state_name) {\n        return stats[i];\n      }\n    }\n  }\n\n  function render(us) {\n    const projection = d3.geoAlbersUsa().translate([width / 2, height / 2]).scale([1280]);\n    const path = d3.geoPath().projection(projection);\n    svg.call(tool_tip);\n    svg.append(\"g\").attr(\"class\", \"states\").attr(\"class\", \"state-borders\").selectAll(\"path\").data(us.features.filter(function (d) {\n      return d.properties.name !== \"Puerto Rico\";\n    })).enter().append(\"path\").on(\"mouseover\", tool_tip.show).on(\"mouseout\", tool_tip.hide).attr(\"d\", path);\n  }\n\n  var zoom = d3.zoom().scaleExtent([1, 2]).on('zoom', function () {\n    svg.selectAll('path').attr('transform', d3.event.transform);\n  });\n  svg.call(zoom);\n  svg.call(zoom.transform, d3.zoomIdentity.scale(1));\n\n  function update(date) {\n    const stats = allStats.filter(function (row, i) {\n      return +row.Updated === +date;\n    });\n    d3.select(\"#date\").text(niceFormat(date));\n    tool_tip.html(function (d, i) {\n      const stateMetrics = getStateMetrics(stats, d.properties.name);\n      let html = \"<table>\" + \"<tr><th>Confirmed Cases:</th><td>\" + stateMetrics.Confirmed + \"</td></tr>\" + \"<tr><th>Changes in Confirmed Cases:</th><td>\" + stateMetrics.ConfirmedChange + \"</td></tr>\" + \"<tr><th>Deaths:</th><td>\" + stateMetrics.Deaths + \"</td></tr>\" + \"<tr><th>Changes in Deaths :</th><td>\" + stateMetrics.DeathsChange + \"</td></tr>\" + \"</table>\";\n      return html;\n    });\n    svg.selectAll(\"path\").attr(\"fill\", function (d) {\n      const metrics = getStateMetrics(stats, d.properties.name);\n      if (metrics === undefined) return \"#ddd\";\n      const rate = getStateMetrics(stats, d.properties.name)[rateType];\n      return colormap(rate);\n    });\n  }\n\n  ;\n  return /*#__PURE__*/_jsxDEV(\"svg\", {\n    id: \"mapsvg_pr\",\n    className: \"map\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 154,\n    columnNumber: 12\n  }, this);\n};\n\nexport default usaVIS;","map":{"version":3,"sources":["C:/Users/Cyber/WebstormProjects/6112 Project/6112 Project/FinalProject/src/usaVIS.js"],"names":["d3","usaVIS","usadata","document","getElementById","value","width","height","niceFormat","utcFormat","dataFormat","dataParse","utcParse","startDate","millisecondsPerDay","valRange","rateType","slider","select","on","date","Date","update","colormap","scaleLinear","domain","range","svg","tool_tip","tip","attr","offset","allStats","Promise","all","json","then","ready","data","us","map","row","i","Updated","Country_Region","Confirmed","ConfirmedChange","Deaths","DeathsChange","availableDays","max","d","Math","round","render","getStateMetrics","stats","state_name","length","projection","geoAlbersUsa","translate","scale","path","geoPath","call","append","selectAll","features","filter","properties","name","enter","show","hide","zoom","scaleExtent","event","transform","zoomIdentity","text","html","stateMetrics","metrics","undefined","rate"],"mappings":"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","sourcesContent":["import * as d3 from \"d3\";\r\n\r\nconst usaVIS = ({usadata}) => {\r\n    document.getElementById(\"slider\").value = 0;\r\n    let width = 1400\r\n    let height = 600\r\n\r\n    const niceFormat = d3.utcFormat(\"%B %d, %Y\");\r\n    const dataFormat = d3.utcFormat(\"%m/%d/%Y\");\r\n    const dataParse = d3.utcParse(\"%m/%d/%Y\");\r\n\r\n    const startDate = dataParse(\"01/21/2020\");\r\n    const millisecondsPerDay = 24 * 60 * 60 * 1000;\r\n    const valRange = [0, 5500000, 8500000];\r\n    const rateType = \"Confirmed\";\r\n\r\n    const slider = d3.select(\"#slider\").on(\"input\", function () {\r\n        var date = new Date(+startDate + millisecondsPerDay * this.value);\r\n        update(date);\r\n    });\r\n\r\n\r\n\r\n    const colormap = d3\r\n        .scaleLinear()\r\n        .domain(valRange)\r\n        .range([\"blue\", \"#eeeeee\", \"red\"]);\r\n    const svg = d3.select(\"#mapsvg_pr\");\r\n    const tool_tip = d3.tip().attr(\"class\", \"d3-tip\").offset([-8, 0]);\r\n    let allStats;\r\n\r\n    Promise.all([\r\n        d3.json(\r\n            \"custom.geo.json\"\r\n        ),\r\n        usadata\r\n    ]).then(ready);\r\n\r\n    function ready(data) {\r\n\r\n        const us = data[0];\r\n\r\n        allStats = data[1].map(function (row, i) {\r\n            return {\r\n                Updated: dataParse(row.Updated),\r\n                Updated: dataParse(row.Updated),\r\n                Country_Region: row.Country_Region,\r\n                Confirmed: row.Confirmed,\r\n                ConfirmedChange: row.ConfirmedChange,\r\n                Deaths: row.Deaths,\r\n                DeathsChange: row.DeathsChange,\r\n            };\r\n        });\r\n\r\n        const availableDays =\r\n            (d3.max(allStats, function (d) {\r\n                    return d.Updated;\r\n                }) -\r\n                startDate) /\r\n            millisecondsPerDay;\r\n        slider.attr(\"max\", Math.round(availableDays));\r\n\r\n        render(us);\r\n        update(startDate);\r\n    }\r\n\r\n    function getStateMetrics(stats, state_name) {\r\n        for (var i = 0; i < stats.length; i++) {\r\n            if (stats[i].Country_Region == state_name) {\r\n                return stats[i];\r\n            }\r\n        }\r\n    }\r\n\r\n    function render(us) {\r\n        const projection = d3\r\n            .geoAlbersUsa()\r\n            .translate([width / 2, height / 2])\r\n            .scale([1280]);\r\n\r\n        const path = d3.geoPath().projection(projection);\r\n\r\n        svg.call(tool_tip);\r\n\r\n        svg\r\n            .append(\"g\")\r\n            .attr(\"class\", \"states\")\r\n            .attr(\"class\", \"state-borders\")\r\n            .selectAll(\"path\")\r\n            .data(\r\n                us.features.filter(function (d) {\r\n                    return d.properties.name !== \"Puerto Rico\";\r\n                })\r\n            )\r\n            .enter()\r\n            .append(\"path\")\r\n            .on(\"mouseover\", tool_tip.show)\r\n            .on(\"mouseout\", tool_tip.hide)\r\n            .attr(\"d\", path);\r\n    }\r\n\r\n    var zoom = d3.zoom()\r\n        .scaleExtent([1, 2])\r\n        .on('zoom', function() {\r\n            svg.selectAll('path')\r\n                .attr('transform', d3.event.transform);\r\n        });\r\n\r\n\r\n    svg.call(zoom)\r\n\r\n\r\n    svg.call(zoom.transform, d3.zoomIdentity.scale(1));\r\n\r\n\r\n    function update(date) {\r\n        const stats = allStats.filter(function (row, i) {\r\n            return +row.Updated === +date;\r\n        });\r\n\r\n        d3.select(\"#date\").text(niceFormat(date));\r\n\r\n        tool_tip.html(function (d, i) {\r\n            const stateMetrics = getStateMetrics(stats, d.properties.name);\r\n            let html =\r\n                \"<table>\" +\r\n                \"<tr><th>Confirmed Cases:</th><td>\" +\r\n                stateMetrics.Confirmed +\r\n                \"</td></tr>\" +\r\n\r\n                \"<tr><th>Changes in Confirmed Cases:</th><td>\" +\r\n                stateMetrics.ConfirmedChange +\r\n                \"</td></tr>\" +\r\n\r\n                \"<tr><th>Deaths:</th><td>\" +\r\n                stateMetrics.Deaths +\r\n                \"</td></tr>\" +\r\n\r\n                \"<tr><th>Changes in Deaths :</th><td>\" +\r\n                stateMetrics.DeathsChange +\r\n                \"</td></tr>\" +\r\n                \"</table>\";\r\n            return html;\r\n        });\r\n\r\n        svg.selectAll(\"path\").attr(\"fill\", function (d) {\r\n            const metrics = getStateMetrics(stats, d.properties.name);\r\n            if (metrics === undefined) return \"#ddd\";\r\n            const rate = getStateMetrics(stats, d.properties.name)[rateType];\r\n            return colormap(rate);\r\n        });\r\n    };\r\n\r\n    return <svg id=\"mapsvg_pr\" className=\"map\"></svg>;\r\n};\r\n\r\nexport default usaVIS;"]},"metadata":{},"sourceType":"module"}